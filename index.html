<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
      <title>Verifiable Credentials JSON Schema Specification v2022</title>
      <script
         src="https://www.w3.org/Tools/respec/respec-w3c"
         class="remove"
         defer
         ></script>
      <script src="./common.js" class="remove"></script>
      <script class="remove">
         var respecConfig = {
           specStatus: "ED",
           group: "vc",
           shortName: "vc-json-schema",
           subtitle: "JSON Schemas for Verifiable Credentials",
           previousMaturity: "CG-FINAL",
           previousPublishDate: "2022-04-05",
           localBiblio: vcwg.localBiblio,
           doJsonLd: true,
           github: "https://github.com/w3c/vc-json-schema/",
           includePermalinks: false,
           edDraftURI: "https://w3c.github.io/vc-json-schema/",
           editors: [{
             name: "Gabe Cohen",
             url: "https://github.com/decentralgabe",
             company: "Block",
             companyURL: "https://www.tbd.website",
             w3cid: 116851
           }, {
             name: 'Orie Steele',
             url: 'https://github.com/OR13',
             company: 'Transmute',
             companyURL: 'https://transmute.industries/',
             w3cid: 109171
           }],
           authors: [{
             name: "Gabe Cohen",
             url: "https://github.com/decentralgabe",
             company: "Block",
             companyURL: "https://www.tbd.website",
             w3cid: 116851
           }, {
             name: 'Orie Steele',
             url: 'https://github.com/OR13',
             company: 'Transmute',
             companyURL: 'https://transmute.industries/',
             w3cid: 109171
           }],
           lint: {
             "no-unused-dfns": false
           },
           postProcess: [restrictRefs],
           maxTocLevel: 2,
           inlineCSS: true,
           otherLinks: [{
             key: "Related Documents",
             data: [{
               value: "Verifiable Credentials Data Model",
               href: "https://www.w3.org/TR/vc-data-model/"
             }]
           }]
         };
      </script>
      <style>
         pre .highlight {
         font-weight: bold;
         color: green;
         }
         pre .comment {
         font-weight: bold;
         color: Gray;
         }
         .color-text {
         font-weight: bold;
         text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
         }
         ol.algorithm {
         counter-reset: numsection;
         list-style-type: none;
         }
         ol.algorithm li {
         margin: 0.5em 0;
         }
         ol.algorithm li:before {
         font-weight: bold;
         counter-increment: numsection;
         content: counters(numsection, ".") ") ";
         }
      </style>
   </head>
   <body>
      <section id='abstract'>
        <h2>Abstract</h2>
        <p>
          Among other things, the [[VC-DATA-MODEL]] specifies the models used for Verifiable Credentials,
          Verifiable Presentations, and explains the relationships between three parties:
          <i>issuers</i>, <i>holders</i>, and <i>verifiers</i>. Critical pieces of functionality referenced
          throughout the [[VC-DATA-MODEL]] are the that of of verifiability, extensibility, and semantic
          interoperability. This specification provides a mechanism to make use of a Credential Schema in
          <a>Verifiable Credential</a>, leveraging the existing
          <a href="https://www.w3.org/TR/vc-data-model/#data-schemas">Data Schemas</a> concept.
        </p>
      </section>
      <section id='sotd'>
        <h2>Status of This Document</h2>
         <p>
            This document is experimental and is undergoing heavy development.
            It is inadvisable to implement the specification in its current form.
            An <a href="https://github.com/TBD54566975/ssi-sdk/tree/main/credential/schema">experimental
            implementation</a> is available.
         </p>
      </section>
      <section class="informative">
         <h2>Introduction</h2>
         <p>
            This specification provides a mechanism for the use of <a>JSON Schemas</a> with
            <a>Verifiable Credentials</a>. A significant part of the integrity of a <a>Verifiable Credential</a>
            comes from the ability to structure its contents so that all three parties —
            issuer, holder, verifier — may have a consistent mechanism of trust in
            interpreting the data that they are provided with. We introducing a new data
            model for an object to facilitate backing Credentials with <a>JSON Schemas</a>
            that we call a <a>Credential Schema</a>.
         </p>
         <p>
            This specification provides a standardized way of creating <a>Credential Schemas</a>
            to be used in credentialing systems. Credential Schemas may apply to any portion
            of a Verifiable Credential. Multiple JSON Schemas may back a single Verifiable Credential,
            e.g. a schema for the `credentialSubject` and another for other credential properties.
         </p>
         <section class="informative">
            <h3>Conceptual Framework</h3>
            <p>TODO</p>
         </section>
         <section class="informative">
            <h3>Terminology</h3>
            <div data-include="./terms.html"></div>
         </section>
         <section id="conformance" class="normative">
          <h3>Conformance</h3>
         </section>
      </section>
      <section class="normative">
         <h2>Data Model</h2>
         <p>
            The following sections outlines the data model for this document.
         </p>
         <section>
            <h3>Metadata</h3>
            <p>
               When an <a>issuer</a> desires to enable JSON Schema validation for a
               <a>verifiable credential</a> they MAY add the following data which
               wraps a <i>schema</i> to be applied to the credential.
            </p>
            <table class="simple">
               <thead>
                  <tr>
                     <th style="white-space: nowrap">Property</th>
                     <th>Description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>id</td>
                     <td>
                        The <code>id</code> value is expected to be a URL that identifies the credential
                        schema associated with the <a>verifiable credential</a>. The value of the <code>id</code>
                        property MUST point to a locally unique identifier which addresses the schema
                        on a given data storage medium (e.g. a database, ledger, distributed file store).
                        Each credential schema has its own unique identifier and each revision of a schema
                        is required to have its own unique identifier.
                        It is <i>RECOMMENDED</i> that this identifier is a
                        <a href="ttps://www.rfc-editor.org/rfc/rfc3986">Uniform Resource Identifier</a> which
                        SHOULD contain information pertaining to the issuer and version of the schema.
                        For example, if the issuer controls a DID 
                        <pre>did:example:abcdefghi</pre>
                        a possible schema ID the issuer created would have an identifier such as:
                        <pre>did:example:abcdefghi/17de181feb67447da4e78259d92d0240?version=1</pre>
                        which makes use of <a href="https://www.w3.org/TR/did-core/#path">DID Path syntax</a>
                        as defined by [[DID-CORE]].
                     </td>
                  </tr>
                  <tr>
                     <td>type</td>
                     <td>
                        The <code>type</code> property MUST be <code>CredentialSchema2022</code>.
                     </td>
                  </tr>
                  <tr>
                     <td>name</td>
                     <td>
                        The <code>name</code> of the credential schema MUST be a string. It is RECOMMENDED
                        that the name is human-friendly and fits the credential schema.
                     </td>
                  </tr>
                  <tr>
                     <td>issuer</td>
                     <td>
                        The <code>issuer</code> property MUST identify the creator of the credential
                        schmea. It is RECOMMENDED that the property is a <a>DID</a>.
                     </td>
                  </tr>
                  <tr>
                     <td>validFrom</td>
                     <td>
                        The <code>validFrom</code> property MUST be a valid [[RFC 3339]] timestamp whose
                        value reflects the date-time value for when the credential schema was created.
                     </td>
                  </tr>
                  <tr>
                     <td>schema</td>
                     <td>
                        The <code>schema</code> property MUST be a valid [[JSON-SCHEMA]] as defined
                        in the <a href="#credential-schema">credential schema</a> section of this document.
                     </td>
                  </tr>
               </tbody>
            </table>
            <pre class="example" highlight="json" title="Example Credential Schema Metadata">
            {
              <span class="highlight">
                "id": "06e126d1-fa44-4882-a243-1e326fbe21db",
                "type": "https://w3c.github.io/vc-json-schema/",
                "name": "Email",
                "issuer": "did:example:MDP8AsFhHzhwUvGNuYkX7T",
                "validFrom": "2021-01-01T00:00:00+00:00",</span>
                "schema": { ... }
            }
          </pre>
         </section>
         <section>
            <h3>Credential Schema</h3>
            <p>
               A credential schema may be used in conjunction with the <i>metadata</i> 
               property listed above, as a part of the <i>schema</i> property OR be used
               directly. The property MUST be a valid [[JSON-Schema]].
            </p>
            <pre class="example" highlight="json" title="Example Credential Schema">
            {
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "description": "Email",
              "type": "object",
              "properties": {
                "credentialSubject": {
                  "type": "object",
                  "properties": {
                    "emailAddress": {
                      "type": "string",
                      "format": "email"
                    }
                  },
                  "required": [
                    "emailAddress"
                  ]
                }
              }
            }
            </pre>
         </section>
      </section>
      <section class="normative">
         <h2>JSON Schema Specifications</h2>

            <p>
               The following section describes the allowed specifications for 
               using a [[JSON-Schema]] with a <a>credential schema</a>.
            </p>
            <table class="simple">
               <thead>
                  <tr>
                     <th style="white-space: nowrap">JSON Schema Specification</th>
                     <th>Date of Publication</th>
                     <th>References</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>draft-bhutton-json-schema-01</td>
                     <td>10 June 2022</td>
                     <td>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-01">JSON Schema: A Media Type for Describing JSON Documents</a></li>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-validation-01">JSON Schema Validation: A Vocabulary for Structural Validation of JSON</a></li>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-bhutton-relative-json-pointer-00">Relative JSON Pointers</a></li>
                     </td>
                  </tr>
                  <tr>
                     <td>Draft 2020-12, draft-bhutton-json-schema-00</td>
                     <td>11 June 2021</td>
                     <td>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-00">JSON Schema: A Media Type for Describing JSON Documents</a></li>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-validation-00">JSON Schema Validation: A Vocabulary for Structural Validation of JSON</a></li>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-bhutton-relative-json-pointer-00">Relative JSON Pointers</a></li>
                     </td>
                  </tr>
                  <tr>
                     <td>Draft 2019-09, Draft 8</td>
                     <td>19 March 2020</td>
                     <td>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-handrews-json-schema-02">JSON Schema: A Media Type for Describing JSON Documents</a></li>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-handrews-json-schema-validation-02">JSON Schema Validation: A Vocabulary for Structural Validation of JSON</a></li>
                        <li><a href="https://datatracker.ietf.org/doc/html/draft-handrews-json-schema-hyperschema-02">JSON Hyper-Schema: A Vocabulary for Hypermedia Annotation of JSON</a></li>
                     </td>
                  </tr>
               </tbody>
            </table>
            <pre class="example nohighlight" title="Example Credential Schema">
        {
          "$schema": "https://json-schema.org/draft/2020-12/schema",
          "description": "Email",
          "type": "object",
          "properties": {
            "credentialSubject": {
              "type": "object",
              "properties": {
                "emailAddress": {
                  "type": "string",
                  "format": "email"
                }
              },
              "required": [
                "emailAddress"
              ]
            }
          }
        }
        </pre>
      </section>
      <section class="informative">
         <h2>Privacy Considerations</h2>
         <p>
            This section details the general privacy considerations and specific privacy
            implications of deploying this specification into production environments.
         </p>
         <section class="informative">
            <h3>Verifier Caching</h3>
            <p>
               It is possible for <a>verifiers</a> to increase the privacy of the
               <a>holder</a> whose <a>verifiable credential</a> is being checked by caching
               status lists that have been fetched from remote servers. By caching the
               content locally, less correlatable information can be inferred from
               <a>verifier</a>-based access patterns on the status list.
            </p>
         </section>
         <section class="informative">
            <h3>Content Distribution Networks</h3>
            <p>
               The use of content distribution networks by <a>issuers</a> can increase the
               privacy of <a>holders</a> by reducing or eliminating requests for the
               status lists from the <a>issuer</a>. Often, a request for a revocation
               list will be served by an edge device and thus be faster and reduce the load
               on the server as well as cloaking <a>verifiers</a> and <a>holders</a>
               from <a>issuers</a>.
            </p>
         </section>
         <section class="informative">
            <h3>Malicious Issuers and Verifiers</h3>
            <p>
               In general, the herd privacy protections offered by this specification can be circumvented by malicious <a>issuers</a> and <a>verifiers</a>. Its privacy benefits can only be realized when issuers and verifiers intend to avoid tracking or sharing the presentation of particular credentials.
            </p>
            <p>
               A malicious <a>issuer</a> might intentionally attack herd privacy by creating a
               unique status list per credential issued in order to establish a 1-1 mapping to track
               when a <a>verifier</a> processes a specific credential. Similarly, they could establish
               another a 1-1 mapping by using a different cryptographic key for every credential
               issued that is tracked in a status list.
            </p>
            <p>
               A malicious <a>verifier</a> might intentionally attack herd privacy by sharing
               information from presented credentials with a malicious <a>issuer</a>.
            </p>
            <p class="issue" data-number="6"></p>
         </section>
      </section>
      <section class="informative">
         <h2>Security Considerations</h2>
         <p>
            There are a number of security considerations that implementers should be
            aware of when processing data described by this specification. Ignoring or
            not understanding the implications of this section can result in
            security vulnerabilities.
         </p>
         
         </section>
      </section>
      <section class="informative">
         <h2>Accessibility Considerations</h2>
         <p>
            There are a number of accessibility considerations implementers should be
            aware of when processing data described in this specification. As with any web
            standards or protocols implementation, ignoring accessibility issues makes
            this information unusable to a large subset of the population. It is important
            to follow accessibility guidelines and standards, such as [[WCAG21]], to ensure
            all people, regardless of ability, can make use of this data. This is
            especially important when establishing systems utilizing cryptography, which
            have historically created problems for assistive technologies.
         </p>
         <p>
            This section details the general accessibility considerations to take into
            account when utilizing this data model.
         </p>
         <p class="issue">
            Write accessibility considerations.
         </p>
      </section>
      <section class="informative">
         <h2>Internationalization Considerations</h2>
         <p>
            There are a number of internationalization considerations implementers should be
            aware of when publishing data described in this specification. As with any web
            standards or protocols implementation, ignoring internationalization makes it
            difficult for data to be produced and consumed across a disparate set of
            languages and societies, which would limit the applicability of the
            specification and significantly diminish its value as a standard.
         </p>
         <p>
            This section outlines general internationalization considerations to take into
            account when utilizing this data model.
         </p>
         <p class="issue">
            Write i18n considerations.
         </p>
      </section>
   </body>
</html>