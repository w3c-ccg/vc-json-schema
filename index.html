<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
      <title>Verifiable Credentials JSON Schema Specification 2023</title>
      <script
         src="https://www.w3.org/Tools/respec/respec-w3c"
         class="remove"
         defer
         ></script>
      <script src="./common.js" class="remove"></script>
      <script class="remove">
         var respecConfig = {
           specStatus: "FPWD",
           group: "vc",
           shortName: "vc-json-schema",
           subtitle: "JSON Schemas for Verifiable Credentials",
           previousMaturity: "CG-FINAL",
           previousPublishDate: "2022-04-05",
           localBiblio: vcwg.localBiblio,
           doJsonLd: true,
           github: "https://github.com/w3c/vc-json-schema/",
           includePermalinks: false,
           edDraftURI: "https://w3c.github.io/vc-json-schema/",
           editors: [{
             name: "Gabe Cohen",
             url: "https://github.com/decentralgabe",
             company: "Block",
             companyURL: "https://www.tbd.website",
             w3cid: 116851
           }, {
             name: 'Orie Steele',
             url: 'https://github.com/OR13',
             company: 'Transmute',
             companyURL: 'https://transmute.industries/',
             w3cid: 109171
           }, {
             name: 'Andres Uribe',
             url: 'https://github.com/andresuribe',
             company: "Block",
             companyURL: "https://www.tbd.website",
             w3cid: 140850
           }],
           authors: [{
             name: "Gabe Cohen",
             url: "https://github.com/decentralgabe",
             company: "Block",
             companyURL: "https://www.tbd.website",
             w3cid: 116851
           }, {
             name: 'Orie Steele',
             url: 'https://github.com/OR13',
             company: 'Transmute',
             companyURL: 'https://transmute.industries/',
             w3cid: 109171
           }],
           lint: {
             "no-unused-dfns": false
           },
           // TODO(gabe): this is broken
           // postProcess: [restrictRefs],
           maxTocLevel: 2,
           inlineCSS: true,
           otherLinks: [{
             key: "Related Documents",
             data: [{
               value: "Verifiable Credentials Data Model",
               href: "https://www.w3.org/TR/vc-data-model/"
             }]
           }]
         };
      </script>
      <style>
         pre .highlight {
          font-weight: bold;
          color: green;
         }
         pre .comment {
          font-weight: bold;
          color: Gray;
         }
         .color-text {
          font-weight: bold;
          text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
         }
         ol.algorithm {
          counter-reset: numsection;
          list-style-type: none;
         }
         ol.algorithm li {
          margin: 0.5em 0;
         }
         ol.algorithm li:before {
          font-weight: bold;
          counter-increment: numsection;
          content: counters(numsection, ".") ") ";
         }
      </style>
   </head>
   <body>
      <section id='abstract'>
        <h2>Abstract</h2>
        <p>
          Among other things, the [[VC-DATA-MODEL-2]] specifies the models used for Verifiable Credentials,
          Verifiable Presentations, and explains the relationships between three parties:
          <i>issuers</i>, <i>holders</i>, and <i>verifiers</i>. Verifiability, extensibility, and semantic
          interoperability are critical pieces of functionality referenced throughout
          the [[VC-DATA-MODEL-2]]. This specification provides a mechanism to make use of a Credential Schema in
          <a>Verifiable Credential</a>, leveraging the existing
          <a data-cite="vc-data-model/#data-schemas">Data Schemas</a> concept.
        </p>
      </section>
      <section id='sotd'>
        <h2>Status of This Document</h2>
         <p>
            This document is experimental and is undergoing heavy development.
            It is inadvisable to implement the specification in its current form.
            An <a href="https://github.com/TBD54566975/ssi-sdk/tree/main/credential/schema">experimental
            implementation</a> is available.
         </p>
      </section>
      <section class="informative">
         <h2>Introduction</h2>
         <p>
            This specification provides a mechanism for the use of <a>JSON Schemas</a> with
            <a>Verifiable Credentials</a>. A significant part of the integrity of a <a>Verifiable Credential</a>
            comes from the ability to structure its contents so that all three parties —
            issuer, holder, verifier — may have a consistent mechanism of trust in
            interpreting the data that they are provided with. We introducing a new data
            model for an object to facilitate backing Credentials with <a>JSON Schemas</a>
            that we call a <a>Credential Schema</a>.
         </p>
         <p>
            This specification provides a standardized way of creating <a>Credential Schemas</a>
            to be used in credentialing systems. Credential Schemas may apply to any portion
            of a Verifiable Credential. Multiple JSON Schemas may back a single Verifiable Credential,
            e.g. a schema for the `credentialSubject` and another for other credential properties.
         </p>
         <section class="informative">
            <h3>Terminology</h3>
            <div data-include="terms.html"></div>
         </section>
         <section id="conformance" class="normative">
         </section>
      </section>
      <section class="normative">
         <h2>Data Model</h2>
         <p>
            The following sections outline the data models for this document, of which there are two:
            <code>JsonSchema2023</code> for usage of a [[JSON-Schema]] directly in a <code>credentialSchema</code>
            property, and <code>JsonSchemaCredential2023</code> for usage of a [[JSON-Schema]] represented as a
            <a>verifiable credential</a>.
         </p>
         <section>
            <h3>JsonSchema2023</h3>
            <p>
               This term is part of the 
               <a href="https://www.w3.org/2018/credentials/#JsonSchema2023">Verifiable Credentials Vocabulary v2.0</a>.
            </p>
            <p>
               <b>JsonSchema2023</b> is used for the validation of W3C Verifiable Credentials using
               JSON Schema. When dereferencing the <code>id</code> property associated with the
               <code>JsonSchema2023</code> <code>type</code> value the result is a valid JSON
               Schema document according to its specification version.
            <p>
               The specification version of [[JSON-Schema]] can be any version noted in the section
               on <a href="#json-schema-specifications">JSON Schema Specifications</a>.
            </p>
            <p>
             <table class="simple">
                <thead>
                   <tr>
                      <th>Property</th>
                      <th>Description</th>
                   </tr>
                </thead>
                <tbody>
                   <tr>
                      <td>id</td>
                      <td>The constraints on the <code>id</code> property are listed in the Verifiable Credentials
                      Data Model specification [[VC-DATA-MODEL-2]]. The value MUST be a URL that identifies
                      the schema associated with the <a>verifiable credential</a>.</td>
                   </tr>
                   <tr>
                      <td>type</td>
                      <td>The <code>type</code> property MUST be JsonSchema2023.</td>
                   </tr>
                </tbody>
             </table>
            </p>
            <p>
               An example of utilizing the VC Data Model's <code>credentialSchema</code>
               is provided below:
               <pre class="example" title="Example JsonSchema2023">
               {
                 "@context": [
                   "https://www.w3.org/ns/credentials/v2",
                   "https://www.w3.org/ns/credentials/examples/v2"
                 ],
                 "id": "https://example.com/credentials/3732",
                 "type": ["VerifiableCredential", "EmailCredential"],
                 "issuer": "https://example.com/issuers/14",
                 "issuanceDate": "2010-01-01T19:23:24Z",
                 "credentialSubject": {
                   "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
                   "emailAddress": "subject@example.com"
                 },
                 "credentialSchema": {
                   "id": "https://example.com/schemas/email.json",
                   "type": "JsonSchema2023"
                 }
               }
              </pre>
            </p>
            <p>
              <p>
               Upon dereferencing the value of the <code>id</code> <code>https://example.com/schemas/email.json</code>,
               a process also be referred to as <a>schema resolution</a>, the following JSON Schema 
               document is returned:
              </p>
              <pre class="example" title="Example Email JSON Schema">
              {
                "$id": "https://example.com/schemas/email.json",
                "$schema": "https://json-schema.org/draft/2020-12/schema",
                "name": "EmailCredential",
                "description": "EmailCredential using JsonSchema2023",
                "type": "object",
                "properties": {
                  "credentialSubject": {
                    "type": "object",
                    "properties": {
                      "emailAddress": {
                        "type": "string",
                        "format": "email"
                      }
                    },
                    "required": [
                      "emailAddress"
                    ]
                  }
                }
              }
              </pre>
            </p>
         </section>
         <section>
            <h3>JsonSchemaCredential2023</h3>
            <p>
               This term is part of the 
               <a href="https://www.w3.org/2018/credentials/#VerifiableCredentialSchema2023">Verifiable Credentials Vocabulary v2.0</a>.
            </p>
            <p>
               <b>JsonSchemaCredential2023</b> is used for the validation of W3C Verifiable Credentials using
               JSON Schema, where the JSON Schema is contained with a <a>verifiable credential</a>.
               When dereferencing the <code>id</code> property associated with the
               <code>JsonSchemaCredential2023</code> <code>type</code> value the result is a valid 
               <a>verifiable credential</a>. The resulting <a>verifiable credential</a>'s  
               <code>credentialSubject</code> property MUST contain a two properties:
               <ul>
                  <li><code>type</code> – the value of which MUST be <code>JsonSchema2023</code></li>
                  <li><code>jsonSchema</code> – an object which contains a valid JSON Schema</li>
               </ul>
            </p>
            <p>
               The <a href="https://www.w3.org/TR/json-ld/#dfn-term-definition">term definition</a>
               for using the <code>jsonSchema</code> property within the <code>credentialSubject</code>
               of a verifiable credential is <code>https://www.w3.org/ns/credentials#JsonSchema</code>.
            </p>
            <p>
               The specification version of [[JSON-Schema]] can be any version noted in the section
               on <a href="#json-schema-specifications">JSON Schema Specifications</a>.
            </p>
            <p>
             <table class="simple">
                <thead>
                   <tr>
                      <th>Property</th>
                      <th>Description</th>
                   </tr>
                </thead>
                <tbody>
                   <tr>
                      <td>id</td>
                      <td>The constraints on the <code>id</code> property are listed in the Verifiable Credentials
                      Data Model specification [[VC-DATA-MODEL-2]]. The value MUST be a URL that identifies
                      the <a>verifiable credential</a> which contains a credential schema.</td>
                   </tr>
                   <tr>
                      <td>type</td>
                      <td>The <code>type</code> property MUST be JsonSchemaCredential2023</td>
                   </tr>
                </tbody>
               </table>
            </p>
               An example of utilizing the VC Data Model's <code>credentialSchema</code>
               is provided below:
               <pre class="example" title="Example JsonSchemaCredential2023">
               {
                 "@context": [
                   "https://www.w3.org/ns/credentials/v2",
                   "https://www.w3.org/ns/credentials/examples/v2"
                 ],
                 "id": "https://example.com/credentials/3733",
                 "type": ["VerifiableCredential", "ExampleEmailCredential"],
                 "issuer": "https://example.com/issuers/14",
                 "issuanceDate": "2010-01-01T19:23:24Z",
                 "credentialSubject": {
                   "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
                   "emailAddress": "subject@example.com"
                 },
                 "credentialSchema": {
                   "id": "https://example.com/credentials/3734",
                   "type": "JsonSchemaCredential2023"
                 }
               }
              </pre>
            </p>
            <p>
              <p>
               Upon dereferencing the value of the <code>id</code> <code>https://example.com/credentials/3734</code>,
               a process also be referred to as <a>schema resolution</a>, the following verifiable credential,
               representing a JSON Schema, is returned:
              </p>
              <pre class="example" title="Example Email Credential Schema">
              {
                "@context": [
                    "https://www.w3.org/ns/credentials/v2",
                    "https://www.w3.org/ns/credentials/examples/v2"
                ],
                "id": "https://example.com/credentials/3734",
                "type": ["VerifiableCredential", "JsonSchemaCredential2023"],
                "issuer": "https://example.com/issuers/14",
                "issuanceDate": "2010-01-01T19:23:24Z",
                "credentialSubject": {
                  "id": "https://example.com/schemas/email-credential-schema.json",
                  "type": "JsonSchema2023",
                  "jsonSchema": {
                     "$id": "https://example.com/schemas/email-credential-schema.json",
                     "$schema": "https://json-schema.org/draft/2020-12/schema",
                     "name": "EmailCredential",
                     "description": "EmailCredential using JsonSchemaCredential2023",
                     "type": "object",
                     "properties": {
                       "credentialSubject": {
                         "type": "object",
                         "properties": {
                           "emailAddress": {
                             "type": "string",
                             "format": "email"
                           }
                         },
                         "required": ["emailAddress"]
                       }
                     }
                  }
                }
              }
              </pre>
            </p>
            <p class="issue" data-number="159">
               Add language about JsonSchemaCredential2023 credentials having a credentialSchema property
               and the risks of nesting.
            </p>
         </section>
      </section>
      <section class="normative">
        <h2>JSON Schema Specifications</h2>
          <p>
             The following section describes the allowed specifications for 
             using a [[JSON-Schema]] with a <a>credential schema</a>.
          </p>
          <p>
            To promote conformance and enable interoperability, implementers MUST
            provide support for JSON Schema specifications where, in the following table,
            the <i>required</i> column's value is <b>yes</b>.
          </p>
          <table class="simple">
             <thead>
                <tr>
                   <th style="white-space: nowrap">JSON Schema Specification</th>
                   <th>Date of Publication</th>
                   <th>$schema URI</th>
                   <th>Required</th>
                </tr>
             </thead>
             <tbody>
                <tr>
                   <td>[[JSON-SCHEMA-2020-12]]</td>
                   <td>10 June 2022</td>
                   <td><a href="https://json-schema.org/draft/2020-12/schema">https://json-schema.org/draft/2020-12/schema</a></td>
                   <td>Yes</td>
                </tr>
                <tr>
                   <td>[[JSON-SCHEMA-2019-09]]</td>
                   <td>19 March 2020</td>
                   <td><a href="https://json-schema.org/draft/2019-09/schema">https://json-schema.org/draft/2019-09/schema</a></td>
                   <td>No</td>
                </tr>
                <tr>
                   <td>[[JSON-SCHEMA-DRAFT-7]]</td>
                   <td>20 September 2018</td>
                   <td><a href="http://json-schema.org/draft-07/schema#">http://json-schema.org/draft-07/schema#</a></td>
                   <td>No</td>
                </tr>
             </tbody>
          </table>

          <p class="note" title="A stable JSON Schema specification is coming">
           <a href="https://json-schema.org/blog/posts/future-of-json-schema">A stable JSON Schema specification</a>
           is in the works. When it's released, we intend to update this table to require the stable version.
         </p>

          <section class="normative">
            <h3>Reserved Keywords</h3>
            <p>
               JSON Schema specifications reserve certain keywords that hold specific meanings and
               functions during the processing of JSON Schemas. It is crucial to avoid using conflicting
               keys when creating JSON Schemas. The specification document for each version of JSON Schema
               lists these reserved keywords, which can be found in the table provided above.
            </p>
            <p>
               In the upcoming sections we list <i>some</i> keywords that possess unique significance and
               should not be used in conflicting ways.
            </p>
            <p>
               Furthermore, we identify specific keywords, that are not explicitly defined by JSON Schema,
               but are emphasized in this specification to support widespread usage.
            </p>
            <section>
               <h4>$id</h4>
               <p>
                  Across JSON Schema specifications, the <code>$id</code> keyword identifies a schema resource
                  with its canonical [[RFC-6596]] URI. The <code>$id</code> MUST be present and its value
                  MUST represent a valid URI-reference [[RFC-3986]].
               </p>
               <p>
                  It is RECOMMENDED that the value of the <code>$id</code> property match the <code>id</code>
                  value in the <code>credentialSchema</code> object of a <a>verifiable credential</a>, and
                  that the value of the <code>$id</code> is a dereferenceable URL [[URL]].
               </p>
            </section>
            <section>
               <h4>$schema</h4>
               <p>
                  Across JSON Schema specifications, the <code>$schema</code> keyword identifies a JSON Schema
                  providing the feature set for a given JSON Schema specification. This property MUST be present
                  in each schema. For example, when constructing a schema for <i>Draft 2020-12</i> the value of 
                  the <code>$schema</code> identifier MUST be <code>https://json-schema.org/draft/2020-12/schema</code>.
               </p>
            </section>
            <section>
               <h4>name</h4>
               <p>
                  It is RECOMMENDED that all JSON Schemas include a <code>name</code> property which provides
                  a human-readable name that describes the schema.
               </p>
            </section>
            <section>
               <h4>description</h4>
               <p>
                  JSON Schemas MAY choose to include an optional <code>description</code> property which provides
                  a human-readable sentence describing the schema.
               </p>
            </section>
          </section>
          <section class="normative">
            <h3>Representations of JSON Schema</h3>
            <p class="issue" data-number="142">
               Write section on using different representations of JSON Schema, such as YAML.
            </p>
          </section>
      </section>
      <section class="normative">
        <h2>Processing</h2>
        <p>
          This section details how to process Credential Schemas, which is commonly referred to
          as <i>JSON schema validation</i>.
        <p>
        <p>
         There are many open source implementations of [[JSON-SCHEMA]] validators across many common programming
         languages. The <a href="https://openjsf.org/">OpenJS Foundation</a> maintains a list of implementations
         as a part of the <a href="https://json-schema.org/implementations.html">JSON Schema official documentation</a>.
        </p>
        <p>
         A common feature of a JSON Schema validator is the ability to detect the version of a JSON Schema document
         and select the validator for that specific version of [[JSON-SCHEMA]]. This is done by switching on the
         schema's <code>$schema</code> property and picking the corresponding validator. Schemas without a 
         <code>$schema</code> property are not considered valid and MUST NOT be processed. Implementers
         SHOULD choose validators which possess this capability and are able to limit validation to the 
         <a href="#json-schema-specifications">JSON Schema specifications</a> supported by this document.
        </p>
        <p>
         Conformant implementers MUST support JSON Schema specification versions marked as <b>required</b>
         in the table defined in the <a href="#json-schema-specifications">JSON Schema specifications section</a>
         of this document. Implementers MAY support JSON Schema specification versions not marked as
         <b>required</b>.
        </p>
        <section>
          <h3>Integrity Validation</h3>
          <p>
            Credential Schemas MAY be packaged as <a>verifiable credentials</a> as defined
            by usage of the <a href="#jsonschemacredential2023">JsonSchemaCredential2023</a> type.
            The credential containing a <a>credential schema</a> may include a proof, either
            embedded according to [[VC-DATA-INTEGRITY]] or packaged as a [[VC-JWT]].
          </p>
          <p>
            Secured credentials representing credential schemas SHOULD first be validated
            according to the rules set out in the aforementioned securing specifications
            before proceeding with additional processing.
          </p>
          <p class="issue" data-number="143">
            Provide examples for Data Integrity and VC-JWT Credential Schemas
          </p>
          <p>
            Credential Schemas of type <a href="#jsonschema2023">JsonSchema2023</a> MAY
            be annotated with integrity information by adding the `digestSRI` property to the `credentialSchema` value
            in the Verifiable Credential which contains the schema, as described in
            <a data-cite="vc-data-model/#integrity-of-related-resources">Integrity of Related Resources</a>.
            Validation of the integrity of the schema MUST be done before evaluation.
          </p>
        <p>
          An example of such usage is provided below:
        </p>
        <pre class="example nohighlight" title="Example Verifiable Credential JsonSchema2023  with Integrity Information">
         {
           "@context": [
             "https://www.w3.org/ns/credentials/v2",
             "https://www.w3.org/ns/credentials/examples/v2"
           ],
           "id": "https://example.com/credentials/3733",
           "type": ["VerifiableCredential", "EmailCredential"],
           "issuer": "https://example.com/issuers/14",
           "issuanceDate": "2010-01-01T19:23:24Z",
           "credentialSubject": {
             "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
             "emailAddress": "subject@example.com"
           },
          <span class="highlight"> "credentialSchema": {
             "id": "https://example.com/schemas/email.json",
             "type": "JsonSchema2023",
             "digestSRI": "sha384-dNwyy/Zs/YjPor8aoOgnaCqb+PH24QcNFxbxM1XoBOxdbgnpQcVaGYH8QunXww2U",
           }</span>
         }
        </pre>

        </section>
        <section>
          <h3>Evaluation</h3>
          <p>
            Validation of a given credential against a schema is to be performed according
            to its associated [[JSON-SCHEMA]] specification. Validation MUST result in one of the following three possible
            outcomes:
            <ul>
             <li><b>Success</b> – The credential is considered to be valid against the given <a>credential schema</a>.</li>
             <li><b>Failure</b> – The credential is not considedred to be valid against the given <a>credential schema</a>.</li>
             <li><b>Indeterminate</b> – The credential could not be validated. Implementers MUST return this outcome when they encounter a schema whose version they do not support.</li>
            </ul>
          </p>
        </section>
      </section>
      <section class="informative">
        <h2>Implementation Considerations</h2>
        <p>
          This section details some issues implementers of the specification
          may consider.
        </p>
        <section class="informative">
          <h3>Validation of Specific Properties in a Credential</h3>
          <p>
            Implementers may wish to validate certain sections of a <a>verifiable credential</a>.
            To do this, <a>credential schemas</a> can be constructed to specify application
            to subsets of a given credential.
          </p>
          <p>
            One example of such a construction would be to validate the presence of certain
            top-level properties in a <a>verifiable credential</a>. The following example
            demonstrates a schema which enforces that a credential issued against it
            has an <code>validUntil</code> property and includes <code>evidence</code>.
          </p>
          <p>
            <pre class="example" title="ValidUntil and Evidence Credential Schema">
            {
              "$id": "validuntil-and-evidence-schema",
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "name": "Example validUntil and evidence schema",
              "description": "Schema requiring validUntil and evidence properties",
              "type": "object",
              "properties": {
                "validUntil": {
                  "type": "object"
                },
                "evidence": {
                  "type": "object"
                }
              },
              "required": ["validUntil", "evidence"]
            }
            </pre>
          </p>
        </section>
        <section class="informative">
          <h3>Additional Properties</h3>
          <p>
            In using [[JSON-Schema]] it is advised that implementers avoid
            setting the <code>additionalProperties</code> to <i>false</i>. Doing
            so could inadvertently exclude properties in a credential from passing
            validation.
          </p>
          <p>
            As an example, consider a credential schema that is intended to validate
            the <code>credentialSubject</code> property of a credential. It is common
            for the <code>credentialSubject</code> property to include an <code>id</code>,
            denoting the identifier the subject. Not including this <code>id</code> property
            in a given schema would result in validation failure. The simple alternative
            is to avoid setting <code>additionalProperties</code> to <i>false</i>.
          </p>
          <p>
            <pre class="example" title="Example Name Credential Schema">
            {
              "$id": "name-schema",
              "$schema": "https://json-schema.org/draft/2020-12/schema",
              "name": "Name schema",
              "description": "A schema capturing a human name",
              "type": "object",
              "properties": {
                "credentialSubject": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "object",
                      "properties": {
                        "firstName": {
                          "type": "string"
                        },
                        "lastName": {
                          "type": "string"
                        },
                        "additionalProperties": false
                      },
                      "required": [
                        "firstName",
                        "lastName"
                      ]
                    }
                  }
                }
              }
            }
            </pre>
          </p>
        </section>
        <section class="informative">
          <h3>Versioning</h3>
          <p>
            Versioning is not provided as an explicit feature of this specification.
            It is advised to make backwards compatabile changes to schemas, should
            they be adjusted. Otherwise, it is advised that a new <a>credential schema</a>
            is created with a unique identifier.
          </p>
          <p class="issue" data-number="120">
            Add language on enabling schema immutability/versioning, such as making use of hashlinks.
          </p>
        </section>
        <section class="informative">
          <h3>Storage</h3>
          <p>
            Credential schemas MAY be created and made available as <b>immutable</b>
            objects. They can be stored on any number of storage mediums such as a distributed
            ledger, traditional database, or decentralized file storage. The same schema could
            be replicated across multiple file stores with the same identifier.
          </p>
          <p>
            Immutability is key to enabling a consistent source of truth for usage with 
            <a>verifiable credentials</a> which are tamper-evident by design.
          </p>
        </section>
        <section class="informative">
          <h3>Multiple Schemas</h3>
          <p>
            A common use case is to include multiple schemas to validate against which a single
            <a>verifiable Credential</a>. One such use case is to utilize <a href="https://github.com/w3c/vc-data-model/blob/main/schema/verifiable-credential/verifiable-credential-schema.json">the JSON Schema defined by the</a> [[VC-DATA-MODEL-2]] in addition to a schema to validate a specific property in the credential, such as the <code>credentialSubject</code>. Multiple schemas MAY be combined using native constructs from the [[JSON-SCHEMA]] specification, through utilizing properties such as <code>oneOf</code>, <code>anyOf</code>, or <code>allOf</code>.
          </p>
          <p>
            An example of how to construct such a schema using the [[JSON-SCHEMA]] property
            <code>allOf</code> is provided below, combining schemas for a <a>verifiable credential</a>,
            name, and email address:
            
            <pre class="example" title="Multiple Schema Credential Schema Example">
            {
              "allOf": [
                {
                  "$ref": "https://raw.githubusercontent.com/w3c/vc-data-model/main/schema/verifiable-credential/verifiable-credential-schema.json"
                },
                {
                  "$id": "name-schema",
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "name": "Name schema",
                  "description": "A schema capturing a human name",
                  "type": "object",
                  "properties": {
                    "credentialSubject": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "object",
                          "properties": {
                            "firstName": {
                              "type": "string"
                            },
                            "lastName": {
                              "type": "string"
                            },
                            "additionalProperties": false
                          },
                          "required": [
                            "firstName",
                            "lastName"
                          ]
                        }
                      }
                    }
                  }
                },
                {
                  "$id": "email-schema-1.0",
                  "$schema": "https://json-schema.org/draft/2020-12/schema",
                  "name": "Email schema",
                  "description": "A schema requiring an email address.",
                  "type": "object",
                  "properties": {
                    "credentialSubject": {
                      "type": "object",
                      "properties": {
                        "email": {
                          "type": "object",
                          "properties": {
                            "emailAddress": {
                              "type": "string",
                              "format": "email"
                            }
                          },
                          "required": ["emailAddress"]
                        }
                      }
                    }
                  }
                }
              ]
            }
            </pre>
          </p>
          <p>
            The example above is used to validate every property in the following 
            <a>verifiable credential</a>:

            <pre class="example" title="Multiple Schema Verifiable Credential Example">
            {
                "@context": ["https://www.w3.org/ns/credentials/v2"],
                "id": "4995c86c-851f-43a6-9dd2-03dc891091fd",
                "type": ["VerifiableCredential"],
                "issuer": "did:example:1234",
                "validFrom": "2023-01-01T05:05:05Z",
                "credentialSubject": {
                    "firstName": "Alice",
                    "lastName": "Bobertson",
                    "emailAddress": "alice@bobertson.com"
                },
                "credentialSchema": {
                    "id": "multiple-credential-schema-test",
                    "type": "JsonSchemaCredential2023"
                },
                "proof": { ... }
            }
            </pre>
          </p>
          <p class="issue" data-number="136">
            Add warning for improperly formed schemas and risks associated with using multiple schemas.
          </p>
        </section>
        <section class="informative">
          <h3>Validity of a Verifiable Credential</h3>
          <p>
            Validation against a [[JSON-SCHEMA]] may be confused with
            <a data-cite="vc-data-model/#dfn-credential-validation">validation</a>
            or <a data-cite="vc-data-model/#dfn-verify">verification</a>
            of a Verifiable Credential. A valid credential according to a [[JSON-SCHEMA]] refers
            only to the structure of the claims comprising a Verifiable Credential. This idea of
            validity does not imply anything about the validity of the Verifiable Credential itself.
            It's possible for a Verifiable Credential to be considered valid by one verifier,
            while another verifier would not consider it valid.
          </p>
        </section>
        <section class="informative">
          <h3>Relationship to Verifiable Credential Type Property</h3>
          <p>
            It is common to define a <code>credential schema</code> that will be set for 
            Verifiable Credentials whose <a data-cite="vc-data-model/#dfn-type">type</a>
            property contains a specific <code>type</code>. In this scenario, it is advised to use the value
            of the specific <code>type</code> in the <code>id</code> or in a <code>name</code> or
            <code>description</code> property.
            of a [[JSON-Schema]].
          </p>
          <p>
            The example below illustrates this for <code>EmailCredential</code>:
            <pre class="example" title="Verifiable Credential with Schema Type">
              {
                "@context": [
                  "https://www.w3.org/ns/credentials/v2",
                  "https://www.w3.org/ns/credentials/examples/v2"
                ],
                "id": "https://example.com/credentials/email-credential",
                "type": ["VerifiableCredential", "EmailCredential"],
                "issuer": "https://example.com/issuers/14",
                "issuanceDate": "2010-01-01T19:23:24Z",
                "credentialSubject": {
                  "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
                  "emailAddress": "tester@example.com"
                },
                "credentialSchema": {
                  "id": "https://example.org/examples/email.json",
                  "type": "JsonSchema2023"
                }
              }
            </pre>
          </p>
          <p>
            <pre class="example" title="Schema with Matching Type Name">
              {
                "$id": "https://example.com/schemas/email.json",
                "$schema": "https://json-schema.org/draft/2020-12/schema",
                "name": "Email Credential",
                "description": "Email Credential Schema for usage in JsonSchema2023",
                "type": "object",
                "properties": {
                  "credentialSubject": {
                    "type": "object",
                    "properties": {
                      "emailAddress": {
                        "type": "string",
                        "format": "email"
                      }
                    },
                    "required": [
                      "emailAddress"
                    ]
                  }
                }
              }
            </pre>
          </p>
          <p>
            It is important to note that a <a>credential schema</a> enables issuers to communicate how to process
            the structure of data inside a verifiable credential, whereas the <code>type</code> property of a <a>verifiable credential</a>
            lets issuers communicate the semantics of the data. It is advised to associate all properties
            that have a semantic mapping with a property in a <a>credential schema</a>.
          </p>
        </section>
      </section>
      <section class="informative">
         <h2>Privacy Considerations</h2>
         <p>
            This section details the general privacy considerations and specific privacy
            implications of deploying this specification into production environments.
         </p>
         <section>
            <h3>Personally Identifiable Information</h3>
            <p>
               Data associated with schemas and <a>verifiable credentials</a> are susceptible
               to privacy violations when shared. Personally identifying data, such as a
               government-issued identifier, address, or name, can be used to track and correlate
               entities. Even less overt personal data such as a birthdate or postal code has
               the ability to result in correlation and de-anonymization.
            </p>
            <p>
               Implementers are strongly advised to avoid constructing schemas with any personally
               identifiable information (PII).
            </p>
            <p>
               If such personally identifiable information is necessary in a schema, or a credential
               schema, implementers are strongly advised to use mechanisms while storing and
               transporting <a>verifiable credentials</a> that protect the data from those who should
               not access it such as Transportation Layer Security (TLS) or other means of encrypting
               the data whether in transit or at rest.
            </p>
         </section>
         <section>
            <h3>Verifier Caching</h3>
            <p>
               Since schemas are immutable, they are highly cachable.
               It is possible for <a>verifiers</a> to increase the privacy of the
               <a>holder</a> whose <a>verifiable credential</a> is being checked by caching
               schemas that have been fetched from remote servers. By caching the
               content locally, less correlatable information can be inferred from
               <a>verifier</a>-based access patterns on the schema. 
            </p>
         </section>
         <section>
            <h3>Content Distribution Networks</h3>
            <p>
               The use of content distribution networks by <a>issuers</a> can increase the
               privacy of <a>holders</a> by reducing or eliminating requests for the
               schemas lists from the <a>issuer</a>. Often, a request for a schema
               list will be served by an edge device and thus be faster and reduce the load
               on the server as well as cloaking <a>verifiers</a> and <a>holders</a>
               from <a>issuers</a>.
            </p>
         </section>
      </section>
      <section class="informative">
         <h2>Security Considerations</h2>
         <p>
            There are a number of security considerations that implementers should be
            aware of when processing data described by this specification. Ignoring or
            not understanding the implications of this section can result in
            security vulnerabilities.
         </p>
         <section>
            <h3>Issuer Impersonation</h3>
            <p>
               It is possible for a schema to become authoritative, such as schemas
               provided by a recognized industry group like a consoritum of financial
               companies. To avoid confusion as to the authorship of <a>credential schemas</a>
               it is advised that they are packaged as secured <a>verifiable credentials</a>.
            </p>
         </section>
         </section>
      </section>
      <section class="informative">
         <h2>Accessibility Considerations</h2>
         <p>
            There are a number of accessibility considerations implementers should be
            aware of when processing data described in this specification. As with any web
            standards or protocols implementation, ignoring accessibility issues makes
            this information unusable to a large subset of the population. It is important
            to follow accessibility guidelines and standards, such as [[WCAG21]], to ensure
            all people, regardless of ability, can make use of this data. This is
            especially important when establishing systems utilizing cryptography, which
            have historically created problems for assistive technologies.
         </p>
         <p>
            JSON Schemas are designed to be a machine-readable format which provides static
            validation. As such, human readability is a secondary concern. When using a
            <a>verifiable credential</a> to represent a schema, we recommend following the
            guidance in the <a data-cite="vc-data-model/#accessibility-considerations">VC Data Model</a>.
         </p>
      </section>
      <section class="informative">
         <h2>Internationalization Considerations</h2>
         <p>
            There are a number of internationalization considerations implementers should be
            aware of when publishing data described in this specification. As with any web
            standards or protocols implementation, ignoring internationalization makes it
            difficult for data to be produced and consumed across a disparate set of
            languages and societies, which would limit the applicability of the
            specification and significantly diminish its value as a standard.
         </p>
         <p>
            JSON Schemas are JSON text intended primarily for machines to read, since they 
            are used for strict static validation of data. Language and text direction concerns 
            are addressed by the <a href="#json-schema-specifications">noted specification documents</a>
            for JSON Schema itself.
         </p>
         <p>
            When using a <a>verifiable credential</a> to represent a schema, we recommend following the
            guidance in the <a data-cite="vc-data-model/#internationalization-considerations">VC Data Model</a>.
         </p>
      </section>
   </body>
</html>
